{
  "module": "v-inputDataForm-btn",
  "layout": {
    "form": {
      "controls": [
        {
          "aggregateIndicatorCode": {
            "label": "聚合指标代码",
            "control": "string",
            "span": 12,
            "rules": [
              {
                "required": true,
                "pattern": "^[A-Za-z][A-Za-z\\d_]{0,39}$",
                "message": "请正确输入"
              }
            ]
          },
          "aggregateIndicatorName": {
            "label": "聚合指标名称",
            "control": "text",
            "span": 12,
            "rules": [
              {
                "required": true,
                "message": "请正确输入",
                "max": 100
              }
            ]
          }
        },
        {
          "aggregateSource": {
            "label": "聚合指标数据来源",
            "control": "select",
            "span": 12,
            "dict": {
              "dictType": "aggregateSource",
              "dictKey": [],
              "format": "value-label",
              "doRequest": {
                "url": "/views/risk/dictdata/aggregateSource.json",
                "method": "get"
              }
            },
            "events": {
              "condition": {
                "switch": {
                  "CustomerIndicator": {
                    "control": {
                      "aggregateFunction": {
                        "disabledOptions":["AvgToday","SumToday","MaxToday","MinToday","ExistsToday","CountToday","NoExistsToday","GeoTime"]
                      },
                      "aggregateUnit": {
                        "disabledOptions":[],
                        "disabled": true
                      },
                      "containsCurrent": {
                        "disabled": false
                      },
                      "aggregateStart": {
                        "disabled": false
                      },
                      "aggregateNumber": {
                        "disabled": false
                      },
                      "aggregateFieldCode": {
                        "disabled": false
                      },
                      "aggregateFieldName": {
                        "disabled": false
                      },
                      "indicatorDimension": {
                        "disabledOptions":["Mer","Term","CounMcc"]
                      },
                      "cruleId": {
                        "value":"",
                        "rules": []
                      },
                      "cruleName": {
                        "value":"",
                        "rules": []
                      }
                    }
                  },
                  "OtherIndicator": {
                    "control": {
                      "aggregateFunction": {
                        "disabledOptions":["AvgToday","SumToday","MaxToday","MinToday","ExistsToday","CountToday","NoExistsToday","GeoTime"]
                      },
                      "aggregateUnit": {
                        "disabledOptions":[],
                        "disabled": true
                      },
                      "containsCurrent": {
                        "disabled": false
                      },
                      "aggregateStart": {
                        "disabled": false
                      },
                      "aggregateNumber": {
                        "disabled": false
                      },
                      "aggregateFieldCode": {
                        "disabled": false
                      },
                      "aggregateFieldName": {
                        "disabled": false
                      },
                      "indicatorDimension": {
                        "disabledOptions":["Cust","Card"]
                      },
                      "cruleId": {
                        "value":"",
                        "rules": []
                      },
                      "cruleName": {
                        "value":"",
                        "rules": []
                      }
                    }
                  },
                  "24HourTrxn": {
                    "control": {
                      "aggregateFunction": {
                        "disabledOptions":[]
                      },
                      "aggregateUnit": {
                        "disabledOptions":["Month","Year"],
                        "disabled": false
                      },
                      "containsCurrent": {
                        "disabled": false
                      },
                      "aggregateStart": {
                        "disabled": false
                      },
                      "aggregateNumber": {
                        "disabled": false
                      },
                      "aggregateFieldCode": {
                        "disabled": false
                      },
                      "aggregateFieldName": {
                        "disabled": false
                      },
                      "indicatorDimension": {
                        "disabledOptions":["Mer","Term","CounMcc"]
                      },
                      "cruleId": {
                        "rules": [
                          {
                            "required": true,
                            "message": "该控件必填",
                            "max": 20
                          }
                        ]
                      },
                      "cruleName": {
                        "rules": [
                          {
                            "required": true,
                            "message": "该控件必填",
                            "max": 20
                          }
                        ]
                      }
                    }
                  },
                  "24HourBehavior": {
                    "control": {
                      "aggregateFunction": {
                        "disabledOptions":["GeoTime"]
                      },
                      "aggregateUnit": {
                        "disabledOptions":["Month","Year"],
                        "disabled": false
                      },
                      "containsCurrent": {
                        "disabled": false
                      },
                      "aggregateStart": {
                        "disabled": false
                      },
                      "aggregateNumber": {
                        "disabled": false
                      },
                      "aggregateFieldCode": {
                        "disabled": false
                      },
                      "aggregateFieldName": {
                        "disabled": false
                      },
                      "indicatorDimension": {
                        "disabledOptions":["Mer","Term","CounMcc"]
                      },
                      "cruleId": {
                        "rules": [
                          {
                            "required": true,
                            "message": "该控件必填",
                            "max": 20
                          }
                        ]
                      },
                      "cruleName": {
                        "rules": [
                          {
                            "required": true,
                            "message": "该控件必填",
                            "max": 20
                          }
                        ]
                      }
                    }
                  },
                  "": {
                    "control": {
                      "aggregateFunction": {
                        "disabledOptions":["Avg","Sum","Max","Min","Exists","NotExists","Count","AvgToday","SumToday","MaxToday","MinToday","ExistsToday","CountToday","NoExistsToday","GeoTime"],
                        "value":""
                      },
                      "aggregateUnit": {
                        "value":"",
                        "disabled": true
                      },
                      "containsCurrent": {
                        "value":"",
                        "disabled": true
                      },
                      "aggregateStart": {
                        "value":"",
                        "disabled": true
                      },
                      "aggregateNumber": {
                        "value":"",
                        "disabled": true
                      },
                      "aggregateFieldCode": {
                        "value":""
                      },
                      "aggregateFieldName": {
                        "value":""
                      },
                      "indicatorDimension": {
                        "disabledOptions":["Cust","Card","Mer","Term","CounMcc"],
                        "value":""
                      },
                      "dataType": {
                        "value":""
                      },
                      "cruleId": {
                        "value":"",
                        "rules": []
                      },
                      "cruleName": {
                        "value":"",
                        "rules": []
                      }
                    }
                  }
                }
              }
            },
            "showItem": {
              "24HourTrxn":["cruleId","cruleName","groupDemensionList"],
              "24HourBehavior":["cruleId","cruleName","groupDemensionList"],
              "":[]
            },
            "rules": [
              {
                "required": true,
                "message": "该控件必填",
                "max": 20
              }
            ]
          },
          "aggregateFunction": {
            "label": "聚合函数",
            "control": "select",
            "span": 12,
            "dict": {
              "dictType": "aggregateFunction",
              "dictKey": [],
              "format": "value-label",
              "doRequest": {
                "url": "/views/risk/dictdata/aggregateFunction.json",
                "method": "get"
              }
            },
            "events": {
              "condition": {
                "switch": {
                  "Avg": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Boolean"]
                      }
                    }
                  },
                  "Sum": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Boolean"]
                      }
                    }
                  },
                  "Max": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["Boolean"]
                      }
                    }
                  },
                  "Min": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["Boolean"]
                      }
                    }
                  },
                  "Exists": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Int","Decimal"]
                      }
                    }
                  },
                  "NotExists": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Int","Decimal"]
                      }
                    }
                  },
                  "Count": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Decimal","Boolean"]
                      }
                    }
                  },
                  "AvgToday": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Boolean"]
                      }
                    }
                  },
                  "SumToday": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Boolean"]
                      }
                    }
                  },
                  "MaxToday": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["Boolean"]
                      }
                    }
                  },
                  "MinToday": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["Boolean"]
                      }
                    }
                  },
                  "ExistsToday": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Int","Decimal"]
                      }
                    }
                  },
                  "NoExistsToday": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Int","Decimal"]
                      }
                    }
                  },
                  "CountToday": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Int","Decimal"]
                      }
                    }
                  },
                  "GeoTime": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Decimal","Boolean"]
                      },
                      "aggregateUnit" : {
                        "disabledOptions": ["Day","Month","Year"]
                      }
                    }
                  },
                  "": {
                    "control": {
                      "dataType": {
                        "disabledOptions":["String","Int","Decimal","Boolean"],
                        "value":""
                      }
                    }
                  }
                }
              }
            },
            "rules": [
              {
                "required": true,
                "message": "该控件必填",
                "max": 20
              }
            ]
          }
        },
        {
          "indicatorDimension": {
            "label": "指标维度",
            "control": "select",
            "span": 12,
            "dict": {
              "dictType": "indicatorDimension",
              "dictKey": [],
              "format": "value-label",
              "doRequest": {
                "url": "/views/risk/dictdata/indicatorDimension.json",
                "method": "get"
              }
            },
            "events": {
              "condition": {
                "switch": {
                  "": {
                    "control": {
                      "aggregateFieldCode": {
                        "value": ""
                      },
                      "aggregateFieldName": {
                        "value": ""
                      }
                    }
                  }
                }
              }
            },
            "rules": [
              {
                "required": true,
                "message": "该控件必填"
              }
            ]
          },
          "dataType": {
            "label": "指标数据类型",
            "control": "select",
            "span": 12,
            "disabledOptions":["String","Int","Decimal","Boolean"],
            "dict": {
              "dictType": "dataType",
              "dictKey": [],
              "format": "value-label",
              "doRequest": {
                "url": "/views/risk/dictdata/dataType.json",
                "method": "get"
              }
            },
            "events": {
              "condition": {
                "switch": {
                  "": {
                    "control": {
                      "aggregateFieldCode": {
                        "value": ""
                      },
                      "aggregateFieldName": {
                        "value": ""
                      }
                    }
                  }
                }
              }
            },
            "showItem": {
              "":[],
              "$default":["aggregateFieldCode","aggregateFieldName"]
            },
            "rules": [
              {
                "required": true,
                "message": "该控件必填"
              }
            ]
          }
        },
        {
          "aggregateFieldCode": {
            "label": "聚合字段代码",
            "control": "lookup",
            "initShow": false,
            "span": 12,
            "keyField": {
              "aggregateFieldName":"label",
              "aggregateFieldCode":"value"
            },
            "toRequest":{
              "url": "/views/risk/risk_aggregate_indicator/aggregate_field_code_list.json",
              "method": "get",
              "params": {
              }
            },
            "props": {
              "width": "800px",
              "title": "聚合字段代码查询",
              "close": "",
              "target": ""
            },
            "rules": [
              {
                "message": "长度超限",
                "max": 40
              }
            ]
          },
          "aggregateFieldName": {
            "label": "聚合字段名称",
            "control": "string",
            "initShow": false,
            "disabled": true,
            "span": 12,
            "rules": [
              {
                "message": "长度超限",
                "max": 100
              }
            ]
          }
        },
        {
          "groupDemensionList": {
            "label": "指标分组维度",
            "#initShow": false,
            "control": "select",
            "multiple": true,
            "span": 24,
            "dict": {
              "dictType": "statisticField",
              "dictKey": [],
              "format": "value-label",
              "doRequest": {
                "url": "/API/risk-management-service/combobox-select/fact/trans",
                "method": "post"
              }
            }
          }
        },
        {
          "cruleId": {
            "label": "过滤规则",
            "control": "select",
            "initShow": false,
            "span": 24,
            "dict": {
              "dictType": "rule_combine_list",
              "dictKey": [],
              "format": "value-label",
              "doRequest": {
                "url": "/API/risk-management-service/combobox-select/rule_combine_list",
                "method": "post",
                "params": {
                  "cruleType":"RR"
                }
              }
            }
          }
        },
        {
          "containsCurrent": {
            "label": "是否包含当笔交易",
            "control": "radio",
            "span": 12,
            "options":[
              {
                "label":"是",
                "value":"Y"
              },
              {
                "label":"否",
                "value":"N"
              }
            ],
            "rules": [
              {
                "required": true,
                "message": "该控件必填",
                "max": 1
              }
            ]
          },
          "aggregateUnit": {
            "label": "聚合时间单位",
            "control": "select",
            "span": 12,
            "dict": {
              "dictType": "controlUnit",
              "dictKey": [],
              "format": "value-label",
              "doRequest": {
                "url": "/views/risk/dictdata/controlUnit.json",
                "method": "get"
              }
            },
            "rules": [
              {
                "required": true,
                "message": "该控件必填",
                "max": 8
              }
            ]
          }
        },
        {
          "aggregateStart": {
            "label": "聚合起始时间",
            "control": "inputNumber",
            "span": 12,
            "rules": [{
              "required": true,
              "message": "请输入整数",
              "type":"integer",
              "min": 0
            }]
          },
          "aggregateNumber": {
            "label": "聚合截止时间",
            "control": "inputNumber",
            "span": 12,
            "rules": [{
              "required": true,
              "message": "请输入大于0的正整数",
              "type":"integer",
              "min": 1
            }]
          }
        },
        {
          "description": {
            "label": "备注",
            "control": "textarea",
            "span": 24,
            "rules": [{
              "message": "请正确输入",
              "max": 500
            }]
          }
        }
      ],
      "initRequest": {
        "url": "/API/risk-management-service/risk-aggregate-indicator/query",
        "method": "post"
      },
      "doRequest": {
        "url": "/API/risk-management-service/risk-aggregate-indicator/update",
        "method": "post",
        "params":{
          "updateUser": "$g{{user_info.userCode}}"
        }
      }
    }
  }
}
