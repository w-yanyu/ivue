{
  "module": "v_search_btn_datagrid",
  "layout": {
    "form": {
      "controls": [
        {
          "trxnDate": {
            "control": "dateTimePicker",
            "label": "交易日期",
            "value":""
          },
          "tranType": {
            "control": "select",
            "label": "交易类型",
            "value": "WITHDRAWAL",
            "dict": {
              "dictType": "E_TRAN_TYPE",
              "dictKey": [
                "E_TRAN_TYPE"
              ],
              "format": "label"
            },
            "rules": [
              {
                "max": 20,
                "message": "长度不能超过20个字符"
              },
              {
                "required": true,
                "message": "请输入交易类型"
              }
            ]
          }
        },
        {
          "ownChannelCode": {
            "control": "select",
            "label": "渠道",
            "disabled": false,
            "value": "",
            "dict": {
              "dictType": "E_CHANNELCODE",
              "dictKey": [
                "E_CHANNELCODE"
              ],
              "format": "label"
            }
          },
          "idempotentField": {
              "control": "text",
              "label": "提现/还款订单号",
              "disable": true,
              "rules": [
                {
                  "max": 30,
                  "message": "长度不能超过20个字符"
                }
              ]          
            },
            "dealStatus": {
              "control": "select",
              "label": "处理标志",
              "disabled": false,
              "value": "",
              "dict": {
                "dictType": "E_DEAL_STATUS",
                "dictKey": [
                  "E_DEAL_STATUS"
                ],
                "format": "label"
              }
            }
        }

      ]
    },
    "datagrid": {
      "scope": "searchTable",
      "isInitSearch": false,
      "doRequest": {
        "url": "/SUMP/icmcall/icmRPCCall",
        "method": "POST",
        "params": {
          "servicecode": "PATSCMSS3001"
        }
      },

      "thead": [
        {
          "type": "index",
          "align": "center"
        },
        {
          "label": "交易日期",
          "width": 120,
          "prop": "trxnDate",
          "align": "center",
          "type": "dateTimePicker",
          "format": "yyyy-MM-dd"
        },
        {
          "label": "交易类型",
          "prop": "tranType",
          "align": "center",
          "dict": {
              "dictType": "E_TRAN_TYPE",
              "dictKey": [
                "E_TRAN_TYPE"
              ],
              "format": "label"
            }
        },
        {
          "label": "渠道",
          "width": 80,
          "prop": "ownChannelCode",
          "align": "center",
          "dict": {
            "dictType": "E_CHANNELCODE",
            "dictKey": [
              "E_CHANNELCODE"
            ],
            "format": "label"
          }
        },
        {
          "label": "提现/还款订单号",
          "prop": "idempotentField",
          "align": "center"
        },
        {
          "label": "内部订单号",
          "width": 160,
          "prop": "orderNo",
          "align": "left"
        },
        {
          "label": "处理标志",
          "prop": "dealStatus",
          "align": "center",
          "dict": {
            "dictType": "E_DEAL_STATUS",
            "dictKey": [
              "E_DEAL_STATUS"
            ],
            "format": "label"
          }
        },
        {
          "label": "交易金额",
          "prop": "trxnAmt",
          "align": "center"
        },
        {
          "label": "异常错误码",
          "prop": "errorCode",
          "align": "center"
        },
        {
          "label": "异常错误信息",
          "width": 200,
          "prop": "errorText",
          "align": "left"
        },
        {
          "label": "操作",
          "fixed": "right",
          "width": 180,
          "align":"center",
          "btns": [
            {
              "type": "look",
              "label": "查看详情",
              "show": {
                "prop": "tranType",
                "is": ["WITHDRAWAL"]
              },
              "toRequest": {
                "url": "/views/workbench/pats/payment_info.json",
                "method": "POST",
                "target": "navTab"
              },
              "props": {
                "width": "50%",
                "title": "提现处理详情"
              }
            },
            {
              "type": "look",
              "label": "重入帐",
              "show": {
                "expression": "'${{current.dealStatus}}' === 'Y' && '${{current.tranType}}' === 'WITHDRAWAL'"
              },
              "toRequest": {
                "url": "/views/workbench/pats/payment_update.json",
                "method": "POST",
                "target": "navTab"
              },
              "props": {
                "width": "50%",
                "title": "提现重入帐"
              }
            },
            {
              "type": "look",
              "label": "查看详情",
              "show": {
                "prop": "tranType",
                "is": ["REPAYMENT"]
              },
              "toRequest": {
                "url": "/views/workbench/pats/repayment_info.json",
                "method": "POST",
                "target": "navTab"
              },
              "props": {
                "width": "50%",
                "title": "还款处理详情"
              }
            },
            {
              "type": "look",
              "label": "重入帐",
              "show": {
                "expression": "'${{current.dealStatus}}' === 'Y' && '${{current.tranType}}' === 'REPAYMENT'"
              },
              "toRequest": {
                "url": "/views/workbench/pats/repayment_update.json",
                "method": "POST",
                "target": "navTab"
              },
              "props": {
                "width": "50%",
                "title": "还款重入帐"
              }
            }
          ]
        }
      ]
    }
  }
}
