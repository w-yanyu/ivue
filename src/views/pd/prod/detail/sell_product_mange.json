{
  "module": "v_search_btn_datagrid",
  "layout": {
    "form": {
      "controls": [
        {
          "sale_prod_cd": {
            "control": "text",
            "label": "可售产品编号",
            "span": 12
          },
          "sale_prod_name": {
            "control": "text",
            "label": "可售产品名称",
            "span": 12
          },
          "prod_type": {
            "label": "可售产品类型",
            "span": 12,
            "control": "remoteSelect",
            "labelField": "title",
            "valueField": "id",
            "doRequest": {
              "url": "/SUMP/call/RPCCall",
              "method": "POST",
              "exclude": [
                "CL",
                "V"
              ],
              "params": {
                "servicecode": "pd0144",
                "grupno": "0006",
                "pid": "KSCP"
              }
            }
          }
        }
      ]
    },
    "toolbar": {
      "btns": [
        {
          "type": "export",
          "icon": "iconfont icon-daochu",
          "label": "导出",
          "doRequest": {
            "method": "POST",
            "url": "/SUMP/rest/file/commExport",
            "params": {
              "length": 999,
              "exportname": "可售产品信息",
              "servicecode": "pd0214"
            }
          },
          "confirm": {
            "title": "提示信息",
            "msg": "确认导出吗？",
            "confirmButtonText": "确定",
            "cancelButtonText": "取消"
          }
        }
      ]
    },
    "datagrid": {
      "scope": "searchTable",
      "isInitSearch": false,
      "doRequest": {
        "url": "/SUMP/icmcall/icmRPCCall",
        "method": "POST",
        "params": {
          "servicecode": "pd0214",
          "is_credit_prod": "0",
          "cust_class_list": "${{params.cust_class_list}}"
        }
      },
      "thead": [
        {
          "type": "string",
          "label": "可售产品名称",
          "prop": "sale_prod_name",
          "align": "center"
        },
        {
          "type": "string",
          "label": "可售产品编号",
          "prop": "sale_prod_cd",
          "align": "center"
        },
        {
          "type": "string",
          "label": "产品版本",
          "prop": "prod_version",
          "align": "center"
        },
        {
          "type": "string",
          "label": "可售产品类型",
          "prop": "prod_type_name",
          "align": "center"
        },
        {
          "type": "string",
          "label": "模板编号",
          "prop": "template_id",
          "align": "center"
        },
        {
          "type": "string",
          "label": "模板版本",
          "prop": "template_version",
          "align": "center"
        },
        {
          "type": "string",
          "label": "适用客户类型",
          "prop": "cust_class",
          "align": "center",
          "dict": {
            "dictType": "PD_E_CUST_CLASS",
            "dictKey": [
              "PD_E_CUST_CLASS"
            ],
            "format": "label"
          }
        },
        {
          "type": "string",
          "label": "审批状态",
          "prop": "appr_status",
          "align": "center",
          "dict": {
            "dictType": "PD_E_APPR_STATUS",
            "dictKey": [
              "PD_E_APPR_STATUS"
            ],
            "format": "label-value"
          }
        },
        {
          "type": "string",
          "label": "产品状态",
          "prop": "prod_status",
          "align": "center",
          "dict": {
            "dictType": "PD_E_PROD_STATUS",
            "dictKey": [
              "PD_E_PROD_STATUS"
            ],
            "format":  "label-value"
          }
        },
        {
          "type": "string",
          "label": "延时上下架日期",
          "prop": "arrive_date",
          "align": "center"
        },
        {
          "type": "string",
          "label": "所属法人",
          "prop": "org_id",
          "align": "center"
          
        },         
        {
          "label": "操作",
          "align": "center",
          "width": "200px",
          "btns": [
            {
              "type": "look",
              "label": "审核记录",
              "toRequest": {
                "url": "/views/pd/prodApprovalRecord/prod_approval_record_list.json",
                "method": "POST"
              },
              "props": {
                "width": "65%",
                "title": "审核记录"
              }
            },
            {
              "type": "look",
              "label": "详情",
              "toRequest": {
                "url": "@prodLayout",
                "method": "GET",
                "params": {
                  "tranType": "detail",
                  "template_id": "${{current.template_id}}",
                  "prod_version": "${{current.prod_version}}",
                  "pageTranType": "format"
                }
              },
              "props": {
                "width": "75%",
                "title": "可售产品详情"
              }
            },
            {
              "type": "custom",
              "label": "变更",
              "toRequest": {
                "url": "/views/pd/prod/detail/sell_product_change.json",
                "method": "POST",
                "params":{

                }
              }
            },
            {
              "type": "custom",
              "label": "上架",
              "toRequest": {
                "url": "@sellProductListing",
                "method": "GET",
                "params": {
                  "servicecode": "pd0217",
                  "appId": "icmsOnl"
                }
              },
              "props": {
                "width": "40%",
                "title": "上架"
              },
              "eventAfter": {
                "callback": "customCallback"
              },
              "show": {
                "expression": "'${{current.prod_status}}' !== '00'"
              }
            }, 
            {
              "type": "custom",
              "label": "下架",
              "toRequest": {
                "url": "@sellProductListing",
                "method": "GET",
                "params": {
                  "servicecode": "pd0217",
                  "appId": "icmsOnl"
                }
              },
              "props": {
                "width": "40%",
                "title": "下架"
              },
              "eventAfter": {
                "callback": "customCallback"
              },
              "show": {
                "expression": "'${{current.prod_status}}' == '00'"
              }
            },
            {
              "type": "look",
              "label": "版本切换",
              "toRequest": {
                "url": "/views/pd/prod/detail/prodVersion/sell_product_list.json",
                "method": "GET",
                "params": {
                }
              },
              "props": {
                "width": "65%",
                "title": "可售产品版本查看"
              }
            },
            {
              "type": "look",
              "label": "复制",
              "toRequest": {
                "url": "/views/pd/prod/detail/prodCopy/prodBaseAttribute.json",
                "method": "GET",
                "params": {
                }
              },
              "props": {
                "width": "35%",
                "title": "产品基础属性"
              }
            },
            {
              "type": "custom",
              "label": "删除",
              "doRequest": {
                "url": "/SUMP/icmcall/icmRPCCall",
                "method": "POST",
                "params": {
                  "servicecode": "pd0209"
                }
              },
              "confirm": {
                "title": "删除产品",
                "msg": "确定删除产品吗？",
                "confirmButtonText": "确定",
                "cancelButtonText": "取消"
              },
              "show": {
                "expression": "'${{current.prod_status}}' !== '00'"
              }
            }
          ]
        }
      ]
    }
  }
}
